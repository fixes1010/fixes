<!DOCTYPE html>
<html>
<head>
    <title>Sohbet | Discord Klonu</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <div class="server-sidebar">
            <div class="server-icon active-server" title="Python Klon Sunucusu">PY</div>
            <a href="{{ url_for('logout') }}" class="server-icon logout-icon" title="Çıkış Yap">X</a>
        </div>

        <div class="channel-sidebar">
            <div class="channel-header">
                Python Klon Sunucusu
            </div>
            <div class="channel-list">
                <div class="channel-category">METİN KANALLARI</div>
                {% for channel in channels %}
                <div class="channel-item {% if channel == current_channel %}active{% endif %}" 
                     data-channel="{{ channel }}">
                    # {{ channel }}
                </div>
                {% endfor %}
            </div>
            
            <div class="user-info">
                <div class="user-info-avatar" style="background-color: {{ avatar_color }};">
                    {{ username[0]|upper }}
                </div>
                <div class="user-details">
                    <div class="user-name" style="color: {{ user_color }};">{{ username }}</div>
                    <div class="user-status">Aktif</div>
                </div>
            </div>
        </div>

        <div class="chat-area">
            <div class="chat-header">
                <span>#</span> <span id="current-channel-name">{{ current_channel }}</span>
            </div>

            <ul id="messages" class="messages-list">
                
                {% for message in initial_messages %}
                <li class="message-box" data-id="{{ message.id }}" data-author="{{ message.author }}">
                    <div class="message-avatar" style="background-color: {{ message.author_color }};">
                        {{ message.author[0]|upper }}
                    </div>
                    
                    <div class="message-content">
                        <div class="message-author" style="color: {{ message.author_color }};">
                            {{ message.author }} <span class="message-time">{{ message.time }}</span>
                        </div>
                        <div class="message-text">
                            {{ message.text }}
                        </div>
                        
                        {% if message.author == username %}
                        <div class="message-actions">
                            <i class="fas fa-edit edit-btn" title="Düzenle"></i>
                            <i class="fas fa-trash-alt delete-btn" title="Sil"></i>
                        </div>
                        {% endif %}
                        
                    </div>
                </li>
                {% endfor %}
                
                <li class="message-box bot-message">
                    <div class="message-avatar" style="background-color: #43b581;">
                        B
                    </div>
                    <div class="message-content">
                        <div class="message-author">
                            Klon Bot <span class="message-time">00:00</span>
                        </div>
                        <div class="message-text">
                            Hoş geldiniz, **{{ username }}**! **#{{ current_channel }}** kanalına bağlandınız.
                        </div>
                    </div>
                </li>
            </ul>
            
            <form id="form" class="chat-form" action="">
                <div class="chat-input-container">
                    <input id="input" autocomplete="off" placeholder="#{{ current_channel }}'e mesaj gönder" />
                    <button type="submit">Gönder</button>
                </div>
            </form>
        </div>
        
        <div class="user-list-sidebar">
            <div class="user-list-category">ÇEVRİMİÇİ KULLANICILAR</div>
            <ul id="online-users" class="online-users-list">
                </ul>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>